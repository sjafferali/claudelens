<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Message Grouping - Mockup</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        body { background: #0a0a0a; color: #e5e5e5; }
        .collapsed-indicator {
            background: repeating-linear-gradient(
                45deg,
                transparent,
                transparent 10px,
                rgba(59, 130, 246, 0.1) 10px,
                rgba(59, 130, 246, 0.1) 20px
            );
        }
    </style>
</head>
<body class="p-8">
    <div class="max-w-6xl mx-auto">
        <h1 class="text-2xl font-bold mb-2">Option 5: Smart Message Grouping</h1>
        <p class="text-gray-400 mb-8">Automatically group and collapse related messages for better readability</p>

        <!-- Grouping Controls -->
        <div class="bg-gray-900 rounded-lg p-4 mb-6 border border-gray-800">
            <div class="flex items-center justify-between">
                <div class="flex items-center gap-4">
                    <span class="text-sm text-gray-400">Smart Grouping:</span>
                    <label class="flex items-center gap-2 cursor-pointer">
                        <input type="checkbox" checked class="w-4 h-4 text-blue-500 bg-gray-800 border-gray-600 rounded">
                        <span class="text-sm">Enabled</span>
                    </label>
                </div>
                <div class="flex items-center gap-3 text-sm">
                    <button class="text-blue-400 hover:text-blue-300">Expand all</button>
                    <span class="text-gray-600">|</span>
                    <button class="text-blue-400 hover:text-blue-300">Collapse all</button>
                    <span class="text-gray-600">|</span>
                    <button class="text-blue-400 hover:text-blue-300">Settings</button>
                </div>
            </div>
        </div>

        <!-- Conversation with Smart Grouping -->
        <div class="space-y-4">
            <!-- Regular Message -->
            <div class="bg-gray-900 rounded-lg p-4 border border-gray-800">
                <div class="flex gap-4">
                    <div class="w-9 h-9 bg-gradient-to-br from-purple-500 to-purple-600 rounded-lg flex items-center justify-center text-white font-semibold">Y</div>
                    <div class="flex-1">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-medium">You</span>
                            <span class="text-xs text-gray-500">15 minutes ago</span>
                        </div>
                        <p class="text-gray-300">Can you help me analyze all the Python files in my project for code quality issues?</p>
                    </div>
                </div>
            </div>

            <!-- Grouped Tool Usage (Collapsed) -->
            <div class="bg-gray-900/50 rounded-lg border border-blue-500/30 collapsed-indicator">
                <div class="p-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 bg-gradient-to-br from-blue-500/50 to-blue-600/50 rounded flex items-center justify-center">
                                <svg class="w-5 h-5 text-blue-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"></path>
                                </svg>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center gap-2">
                                    <span class="font-medium text-blue-400">Tool Operations</span>
                                    <span class="text-xs px-2 py-0.5 bg-blue-500/20 rounded-full text-blue-400">12 messages grouped</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">File search, reading, and analysis operations</p>
                            </div>
                        </div>
                        <button class="text-sm text-blue-400 hover:text-blue-300 flex items-center gap-1">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7 7"></path>
                            </svg>
                            Expand
                        </button>
                    </div>

                    <!-- Quick Summary -->
                    <div class="mt-3 pl-11 space-y-1 text-xs text-gray-500">
                        <div class="flex items-center gap-2">
                            <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                            <span>Found 47 Python files</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="w-2 h-2 bg-green-500 rounded-full"></span>
                            <span>Analyzed 12,543 lines of code</span>
                        </div>
                        <div class="flex items-center gap-2">
                            <span class="w-2 h-2 bg-yellow-500 rounded-full"></span>
                            <span>Identified 23 potential issues</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Main Response -->
            <div class="bg-gray-900 rounded-lg p-4 border border-gray-800">
                <div class="flex gap-4">
                    <div class="w-9 h-9 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center text-white font-semibold">C</div>
                    <div class="flex-1">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-medium">Claude</span>
                            <span class="text-xs text-gray-500">10 minutes ago</span>
                        </div>
                        <p class="text-gray-300 mb-2">I've completed the analysis of your Python project. Here's what I found:</p>
                        <div class="space-y-2 text-gray-300">
                            <p><strong>Code Quality Issues Found:</strong></p>
                            <ul class="list-disc list-inside ml-4 space-y-1">
                                <li>5 instances of unused imports</li>
                                <li>3 functions with complexity > 10</li>
                                <li>8 missing docstrings</li>
                                <li>7 lines exceeding 88 characters</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Grouped Sidechain (Collapsed) -->
            <div class="bg-amber-900/10 rounded-lg border border-amber-500/30 collapsed-indicator">
                <div class="p-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center gap-3">
                            <div class="w-8 h-8 bg-gradient-to-br from-amber-500/50 to-amber-600/50 rounded flex items-center justify-center">
                                <div class="w-3 h-3 bg-amber-500 rounded-full"></div>
                            </div>
                            <div class="flex-1">
                                <div class="flex items-center gap-2">
                                    <span class="font-medium text-amber-400">Parallel Analysis</span>
                                    <span class="text-xs px-2 py-0.5 bg-amber-500/20 rounded-full text-amber-400">Sidechain - 8 messages</span>
                                </div>
                                <p class="text-sm text-gray-500 mt-1">Security vulnerability scanning</p>
                            </div>
                        </div>
                        <button class="text-sm text-amber-400 hover:text-amber-300 flex items-center gap-1">
                            <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7 7"></path>
                            </svg>
                            Expand
                        </button>
                    </div>
                </div>
            </div>

            <!-- Thread Continuation (Expanded Example) -->
            <div class="bg-gray-900 rounded-lg border border-gray-800 overflow-hidden">
                <div class="p-4 bg-gray-800/30">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center gap-2">
                            <svg class="w-4 h-4 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M7 20l4-16m2 16l4-16M6 9h14M4 15h14"></path>
                            </svg>
                            <span class="text-sm font-medium text-gray-300">Thread Branch</span>
                            <span class="text-xs text-gray-500">(3 messages)</span>
                        </div>
                        <button class="text-sm text-blue-400 hover:text-blue-300">Collapse</button>
                    </div>
                </div>

                <div class="divide-y divide-gray-800">
                    <div class="p-3 pl-12">
                        <div class="flex items-center gap-2 mb-1">
                            <div class="w-6 h-6 bg-gradient-to-br from-purple-500 to-purple-600 rounded flex items-center justify-center text-white text-xs font-semibold">Y</div>
                            <span class="text-sm text-gray-300">Can you fix the complexity issues?</span>
                        </div>
                    </div>
                    <div class="p-3 pl-12">
                        <div class="flex items-center gap-2 mb-1">
                            <div class="w-6 h-6 bg-gradient-to-br from-blue-500 to-blue-600 rounded flex items-center justify-center text-white text-xs font-semibold">C</div>
                            <span class="text-sm text-gray-300">I'll help refactor those complex functions...</span>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Long Content (Auto-Collapsed) -->
            <div class="bg-gray-900 rounded-lg p-4 border border-gray-800">
                <div class="flex gap-4">
                    <div class="w-9 h-9 bg-gradient-to-br from-blue-500 to-blue-600 rounded-lg flex items-center justify-center text-white font-semibold">C</div>
                    <div class="flex-1">
                        <div class="flex items-center justify-between mb-2">
                            <span class="font-medium">Claude</span>
                            <span class="text-xs text-gray-500">5 minutes ago</span>
                        </div>
                        <div class="text-gray-300">
                            <p class="mb-2">Here's the refactored version of your complex function:</p>
                            <div class="bg-gray-800 rounded p-3 font-mono text-sm mb-2">
                                <code>def process_data(items):</code><br/>
                                <code>    # Function preview...</code>
                            </div>
                            <div class="text-center py-2">
                                <button class="text-sm text-blue-400 hover:text-blue-300 flex items-center gap-1 mx-auto">
                                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7 7"></path>
                                    </svg>
                                    Show full code (45 more lines)
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Grouping Statistics -->
        <div class="mt-8 bg-gray-900 rounded-lg p-6 border border-gray-800">
            <h3 class="text-lg font-semibold mb-4 text-blue-400">Grouping Summary</h3>
            <div class="grid grid-cols-3 gap-4 text-sm">
                <div class="text-center">
                    <div class="text-2xl font-semibold text-blue-400">47</div>
                    <div class="text-gray-400">Total Messages</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl font-semibold text-green-400">23</div>
                    <div class="text-gray-400">Grouped Messages</div>
                </div>
                <div class="text-center">
                    <div class="text-2xl font-semibold text-purple-400">5</div>
                    <div class="text-gray-400">Groups Created</div>
                </div>
            </div>

            <div class="mt-4 space-y-2 text-sm">
                <div class="flex justify-between text-gray-400">
                    <span>Tool operations grouped:</span>
                    <span class="text-gray-200">12 messages</span>
                </div>
                <div class="flex justify-between text-gray-400">
                    <span>Sidechain conversations:</span>
                    <span class="text-gray-200">8 messages</span>
                </div>
                <div class="flex justify-between text-gray-400">
                    <span>Thread branches:</span>
                    <span class="text-gray-200">3 messages</span>
                </div>
            </div>
        </div>

        <!-- Feature Highlights -->
        <div class="mt-8 bg-gray-900 rounded-lg p-6 border border-gray-800">
            <h3 class="text-lg font-semibold mb-4 text-blue-400">Key Features</h3>
            <ul class="space-y-2 text-sm text-gray-300">
                <li class="flex items-start gap-2">
                    <span class="text-green-400 mt-0.5">✓</span>
                    <span>Auto-collapse tool_use/tool_result message pairs</span>
                </li>
                <li class="flex items-start gap-2">
                    <span class="text-green-400 mt-0.5">✓</span>
                    <span>Group sidechain executions into expandable sections</span>
                </li>
                <li class="flex items-start gap-2">
                    <span class="text-green-400 mt-0.5">✓</span>
                    <span>Smart summarization of grouped content</span>
                </li>
                <li class="flex items-start gap-2">
                    <span class="text-green-400 mt-0.5">✓</span>
                    <span>Auto-collapse long code blocks with preview</span>
                </li>
                <li class="flex items-start gap-2">
                    <span class="text-green-400 mt-0.5">✓</span>
                    <span>Thread branches shown as collapsible groups</span>
                </li>
            </ul>
        </div>
    </div>
</body>
</html>
